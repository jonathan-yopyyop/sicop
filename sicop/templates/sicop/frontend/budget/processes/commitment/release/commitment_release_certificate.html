{% extends 'sicop/frontend/base/base.html' %}
{% load arimetic_tags %}
{% load static %}
{% load i18n %}
{% load humanize %}
{% load budget_tags %}
{% load sicop_filters %}
{% block page_title %}
  {% trans 'Budget commitment release certificate' %}
{% endblock page_title %}
{% block content %}
<style>
  table {
    width: 100%;
    padding: -1px;
    margin: -1px;
    border: 0px solid black;
  }
  td{
    height: 30px;
  }
  .certificate-title {
    font-size: 10px;
    font-weight: bold;
    color: black;
  }
  .row1-td-1{
    width: 10%;
    border-left: 1px solid black;
    border-top: 1px solid black;
    border-bottom: 1px solid black;
    padding: -1px;
    margin: -1px;
    text-align: center;
    background-color: white;
  }
  .row1-td-2{
    width: 50%;
    border-top: 1px solid black;
    border-bottom: 1px solid black;
    padding: -1px;
    margin: -1px;
    text-align: center;
    background-color: white;
  }
  .row1-td-3{
    width: 40%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    text-align: center;
    background-color: white;
  }
  .row1-td-3-top{
    width: 100%;
    padding: -1px;
    margin: -1px;
    text-align: center;
    background-color: white;
  }
  .row1-td-3-bottom-col1{
    width: 30%;
    border-top: 1px solid black;
    padding: -1px;
    margin: -1px;
    text-align: center;
    background-color: white;
  }
  .item-description-text{
    font-size: 10px;
    font-weight: bold;
    color: black;
    margin-left: 5px;
  }
  .item-value-text{
    font-size: 10px;
    font-weight: bold;
    color: #642D90;
    margin-left: 5px;
  }
  .item-value-text-white{
    font-size: 10px;
    font-weight: bold;
    color: white;
    margin-left: 5px;
  }
  .row1-td-3-bottom-col2{
    width: 70%;
    border-top: 1px solid black;
    border-left: 1px solid black;
    padding: -1px;
    margin: -1px;
  }
  .row2-td-1{
    width: 20%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: #CC99FF;
  }
  .row2-td-2{
    width: 40%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
  }
  .row2-td-3{
    width: 15%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: #CC99FF;
  }
  .row2-td-4{
    width: 25%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
  }
  .row3-td-1{
    width: 100%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: #642D90;
  }
  .row4-td-1{
    width: 20%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: #CC99FF;
  }
  .row4-td-2{
    width: 80%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
  }
  .row5-td-1{
    width: 20%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: #CC99FF;
  }
  .row5-td-2{
    width: 30%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
  }
  .row5-td-2-9{
    width: 80%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
  }
  .row5-td-3{
    width: 10%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: #CC99FF;
  }
  .row5-td-4{
    width: 40%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
  }
  .row6-td-1{
    width: 100%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
    height: 5px;
  }
  .row7-td-1{
    width: 28%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: #CC99FF;
  }
  .row7-td-2{
    width: 24%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: #CC99FF;
  }
  .row8-td-1{
    width: 28%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
    color: #642D90;
  }
  .row8-td-2{
    width: 24%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
    color: #642D90;
  }
  .row9-td-1{
    width: 28%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: #CC99FF;
    color: black;
    height: 50px;
  }
  .row9-td-2{
    width: 72%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
    color: black;
    height: 60px;
  }
  .row10-td-1{
    width: 28%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: #CC99FF;
    color: black;
    height: 40px;
  }
  .row10-td-2{
    width: 72%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
    color: black;
    height: 40px;
  }
  .row11-td-1{
    width: 100%;
    border: 1px solid black;
    padding: -1px;
    margin: -1px;
    background-color: white;
    height: 30px;
  }
  .bottom-text{
    font-size: 10px;
    font-weight: bold;
    color: black;
  }
  
</style>
  <section class="app-invoice-wrapper">
    <div class="row">
        <div class="col-xl-9 col-md-8 col-12 printable-content">
            <!-- using a bootstrap card -->
            <div class="card">
                <!-- card body -->
                <div class="card-body p-2">
                  <table>
                    <tr>
                      <td class="row1-td-1">
                        <img src="{% static 'stack/app-assets/images/logo/Logo-Maloka.png' %}" alt="logo" width="50px">
                      </td>
                      <td class="row1-td-2">
                        <h5 class="text-center certificate-title">{% trans "BUDGET COMMITMENT RELEASE CERTIFICATE" %}</h5>
                      </td>
                      <td class="row1-td-3">
                        <table>
                          <tr>
                            <td class="row1-td-3-top">
                              <h5 class="text-center certificate-title">{% trans "Code" %}: {{certificate_version.code}}</h5>
                            </td>
                          </tr>
                          <tr>
                            <table>
                              <tr>
                                <td class="row1-td-3-bottom-col1">
                                  <h5 class="text-center certificate-title">{% trans "Version" %}: {{certificate_version.version}}</h5>
                                </td>
                                <td class="row1-td-3-bottom-col2">
                                  <h5 class="text-center certificate-title">{% trans "Version date" %}: {{certificate_version.date|date:"Y/m/d"}}</h5>
                                </td>
                              </tr>
                            </table>
                          </tr>
                        </table>
                      </td>
                    </tr>
                    <tr>
                      <table>
                        <tr>
                          <td class="row2-td-1">
                            <h5 class="item-description-text">
                              {% trans "APPLICATION DATE" %}
                            </h5>
                          </td>
                          <td class="row2-td-2">
                            <h5 class="item-value-text">
                              {{commitment_orphan_release.updated_at|date:"Y/m/d"}}
                            </h5>
                          </td>
                          <td class="row2-td-3">
                            <h5 class="item-description-text">
                              {% trans "NUMBER" %}
                            </h5>
                          </td>
                          <td class="row2-td-4">
                            <h5 class="item-value-text">
                              {{commitment_orphan_release.id}}
                            </h5>
                          </td>
                        </tr>
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <td class="row3-td-1">
                          <h5 class="item-value-text-white">
                            {% trans "GENERAL INFORMATION" %}
                          </h5>
                        </td>
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <tr>
                          <td class="row5-td-1">
                            <h5 class="item-description-text">
                              {% trans "APPLICANT NAME" %}
                            </h5>
                          </td>
                          <td class="row5-td-2">
                            <h5 class="item-value-text">
                              {{commitment.user.name}}
                            </h5>
                          </td>
                          <td class="row5-td-3">
                            <h5 class="item-description-text">
                              {% trans "POSITION" %}
                            </h5>
                          </td>
                          <td class="row5-td-4  ">
                            <h5 class="item-value-text">
                              {{area_member.job_title}}
                            </h5>
                          </td>
                        </tr>
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <tr>
                          <td class="row6-td-1"></td>
                        </tr>
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <td class="row3-td-1">
                          <h5 class="item-value-text-white">
                            {% trans "APPLICATION DATA" %}
                          </h5>
                        </td>
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <tr>
                          <td class="row5-td-1">
                            <h5 class="item-description-text">
                              {% trans "CAP" %}
                            </h5>
                          </td>
                          <td class="row5-td-2">
                            <h5 class="item-value-text">
                              {{commitment.provision_cart}}
                            </h5>
                          </td>
                          <td class="row5-td-1">
                            <h5 class="item-description-text">
                              {% trans "HAS TAX?" %}
                            </h5>
                          </td>
                          <td class="row5-td-2">
                            <h5 class="item-value-text">
                              {% if commitment.has_tax %}
                                {% trans "Yes" %}
                              {% else %}
                                {% trans "No" %}
                              {% endif %}
                            </h5>
                          </td>
                        </tr>
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <tr>
                          <td class="row5-td-1">
                            <h5 class="item-description-text">
                              {% trans "COMMITMENT TYPE" %}
                            </h5>
                          </td>
                          <td class="row5-td-2">
                            <h5 class="item-value-text">
                              {{commitment.get_contract_or_po_display}}
                            </h5>
                          </td>
                          <td class="row5-td-1">
                            <h5 class="item-description-text">
                              {% trans "COMMITMENT ID" %}
                            </h5>
                          </td>
                          <td class="row5-td-2">
                            <h5 class="item-value-text">
                              {{key}}
                            </h5>
                          </td>
                        </tr>
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <tr>
                          <td class="row5-td-1">
                            <h5 class="item-description-text">
                              {% trans "THIRD" %}
                            </h5>
                          </td>
                          <td class="row5-td-2">
                            <h5 class="item-value-text">
                              {{commitment.third}}
                            </h5>
                          </td>
                          <td class="row5-td-1">
                            <h5 class="item-description-text">
                              {% trans "TAX AMOUNT" %}
                            </h5>
                          </td>
                          <td class="row5-td-2">
                            <h5 class="item-value-text">
                              {{commitment.tax_amount|format_to_cop}}
                            </h5>
                          </td>
                        </tr>
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <tr>
                          <td class="row5-td-1">
                            <h5 class="item-description-text">
                              {% trans "CAP BUDGET" %}
                            </h5>
                          </td>
                          <td class="row5-td-2">
                            <h5 class="item-value-text">
                              {{commitment.provision_budget_amount|format_to_cop}}
                            </h5>
                          </td>
                          <td class="row5-td-1">
                            <h5 class="item-description-text">
                              {% trans "COMMITMENT BUDGET" %}
                            </h5>
                          </td>
                          <td class="row5-td-2">
                            <h5 class="item-value-text">
                              {{commitment.real_provision_budget_amount|format_to_cop}}
                            </h5>
                          </td>
                        </tr>
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <tr>
                          <td class="row6-td-1"></td>
                        </tr>
                      </table>
                    </tr>
                    {% if commitment_orphan_release_items is not None %}
                    <tr>
                      <table>
                        <td class="row3-td-1">
                          <h5 class="item-value-text-white">
                            {% trans "RELEASE INFORMATION" %}
                          </h5>
                        </td>
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <tr>
                          <td class="row7-td-1 text-center  ">
                            <h5 class="item-description-text">
                              {% trans "ITEM" %}
                            </h5>
                          </td>
                          <td class="row7-td-2 text-center  ">
                            <h5 class="item-description-text">
                              {% trans "ORIGINAL AMOUNT" %}
                            </h5>
                          </td>
                          <td class="row7-td-2 text-center  ">
                            <h5 class="item-description-text">
                              {% trans "BUDGET TO ADD" %}
                            </h5>
                          </td>
                          <td class="row7-td-2 text-center  ">
                            <h5 class="item-description-text">
                              {% trans "NEW AMOUNT" %}
                            </h5>
                          </td>
                        </tr>
                        {% for item in commitment_orphan_release_items %}
                        <tr>
                          <td class="row8-td-1 text-center  ">
                            <h5 class="item-description-text">
                              {{item.budget.budget_description}}
                            </h5>
                          </td>
                          <td class="row8-td-2 text-center  ">
                            <h5 class="item-description-text">
                              {% rest_2_values item.budget_amount_before_change item.total_to_release as real_budget_amount_before_change %}
                              {{item.budget_amount_before_change|format_to_cop}}
                              
                            </h5>
                          </td>
                          <td class="row8-td-2 text-center  ">
                            <h5 class="item-description-text">
                              {{item.total_to_release|format_to_cop}}
                            </h5>
                          </td>
                          <td class="row8-td-2 text-center  ">
                            <h5 class="item-description-text">
                              {{item.new_db_budget_amount|format_to_cop}}
                            </h5>
                          </td>
                        </tr>  
                        {% endfor %}
                          
                      </table>
                    </tr>
                    <tr>
                      <table>
                        <tr>
                          <td class="row6-td-1"></td>
                        </tr>
                      </table>
                    </tr>
                    {% endif %}
                  </table>
                </div>
            </div>
        </div>
        <!-- buttons section -->
        <div class="col-xl-3 col-md-4 col-12 action-btns">
          <div class="card">
            <div class="card-body p-2">
              {% if commitment.finished %}
              <a href="#" class="btn btn-primary btn-block mb-1 print-invoice"> <i class="feather icon-printer mr-25 common-size"></i> {% trans "Print" %}</a>  
              {% endif %}
              <a href="{% url 'commitment_release_list' %}" class="btn btn-info btn-block mb-1"><i class="feather icon-list mr-25 common-size"></i> {% trans "Go to CLP list" %}</a>
            </div>
          </div>
        </div>
    </div>
</div>
{% endblock content %}
